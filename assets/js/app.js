export function load(key,fallback=[]){try{return JSON.parse(localStorage.getItem(key)||JSON.stringify(fallback));}catch{return fallback;}}export function save(key,value){localStorage.setItem(key,JSON.stringify(value));}export function parseGps(gps){if(!gps)return null;const s=String(gps).replace(/\s+/g,'').trim();const p=s.split(',');if(p.length!==2)return null;const lat=Number(p[0]),lng=Number(p[1]);if(!Number.isFinite(lat)||!Number.isFinite(lng))return null;return{lat,lng};}export function esc(s){return String(s??'').replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));}
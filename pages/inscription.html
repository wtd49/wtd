<!doctype html><html><head><meta charset='utf-8'/><meta name='viewport' content='width=device-width,initial-scale=1'/><link rel='stylesheet' href='../assets/css/main.css'><title>Inscription</title></head><body><header><a href='../index.html'>← Menu</a> <b>Inscription</b></header><main class='card'><form id='f'><div class='row'><input name='id' placeholder='ID (ex TANA-001)' required><input name='nom' placeholder='Nom' required></div><input name='gps' placeholder='lat, lng' required style='width:100%;padding:10px;border-radius:10px;border:1px solid #ddd'><div class='row'><input name='reseau' placeholder='TELMA/Orange/Airtel'><input name='statut' placeholder='OK/KO'></div><button class='action' type='submit'>Enregistrer</button></form><p class='muted' id='m'></p></main><script type='module'>import {load,save} from '../assets/js/app.js';const KEY='wtd_fokontany_db';document.getElementById('f').addEventListener('submit',e=>{e.preventDefault();const r=Object.fromEntries(new FormData(e.target).entries());const db=load(KEY,[]);const i=db.findIndex(x=>x.id===r.id);if(i>=0){if(db[i].gps!==r.gps){document.getElementById('m').textContent='Refus: GPS déjà fixé pour cet ID.';return;}db[i]={...db[i],...r,updated_at:new Date().toISOString()};}else{db.push({...r,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});}save(KEY,db);document.getElementById('m').textContent='OK ✅';e.target.reset();});</script></body></html>